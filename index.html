<!DOCTYPE html><!DOCTYPE html>

<html lang="de"><html lang="de">

<head><head>

    <meta charset="UTF-8">    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Matelio GreenComplay EPD-Extractor - Enhanced CO2 Footprint Calculator</title>    <title>Matelio GreenComplay EPD-Extractor - CO2 Footprint Calculator</title>

    <style>    <style>

        * {        * {

            margin: 0;            margin: 0;

            padding: 0;            padding: 0;

            box-sizing: border-box;            box-sizing: border-box;

        }        }



        body {        body {

            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

            min-height: 100vh;            min-height: 100vh;

            padding: 20px;            padding: 20px;

        }        }



        .container {        .container {

            max-width: 1400px;            max-width: 1200px;

            margin: 0 auto;            margin: 0 auto;

            background: white;            background: white;

            border-radius: 20px;            border-radius: 20px;

            box-shadow: 0 20px 40px rgba(0,0,0,0.1);            box-shadow: 0 20px 40px rgba(0,0,0,0.1);

            overflow: hidden;            overflow: hidden;

        }        }



        .header {        .header {

            background: linear-gradient(135deg, #2c3e50, #34495e);            background: linear-gradient(135deg, #2c3e50, #34495e);

            color: white;            color: white;

            padding: 40px;            padding: 30px;

            text-align: center;            text-align: center;

        }            position: relative;

        }

        .header h1 {

            font-size: 2.5em;        .header h1 {

            margin-bottom: 10px;            font-size: 2.5em;

            text-shadow: 0 2px 4px rgba(0,0,0,0.3);            margin-bottom: 10px;

        }        }



        .header p {        .header p {

            font-size: 1.2em;            font-size: 1.2em;

            opacity: 0.9;            opacity: 0.9;

        }        }



        .main-content {        .version-info {

            padding: 40px;            position: absolute;

        }            top: 15px;

            right: 20px;

        .upload-section {            background: rgba(255,255,255,0.1);

            background: linear-gradient(135deg, #f8f9fa, #e9ecef);            padding: 8px 15px;

            border-radius: 15px;            border-radius: 20px;

            padding: 30px;            font-size: 0.85em;

            margin-bottom: 30px;            border: 1px solid rgba(255,255,255,0.2);

            text-align: center;        }

        }

        .version-info div {

        .upload-area {            margin: 2px 0;

            background: white;        }

            border: 3px dashed #dee2e6;

            border-radius: 10px;        .main-content {

            padding: 50px 20px;            padding: 40px;

            cursor: pointer;        }

            transition: all 0.3s ease;

            margin-bottom: 20px;        .upload-section {

        }            background: #f8f9fa;

            border-radius: 15px;

        .upload-area:hover {            padding: 30px;

            background: #f0f4ff;            margin-bottom: 30px;

            border-color: #667eea;            border: 2px dashed #dee2e6;

        }            transition: all 0.3s ease;

        }

        .upload-area.dragover {

            background: #f0f4ff;        .upload-section:hover {

            border-color: #667eea;            border-color: #667eea;

        }            transform: translateY(-2px);

        }

        .upload-icon {

            font-size: 3em;        .upload-area {

            color: #6c757d;            text-align: center;

            margin-bottom: 15px;            cursor: pointer;

        }        }



        .file-input {        .upload-icon {

            display: none;            font-size: 3em;

        }            color: #667eea;

            margin-bottom: 15px;

        .btn {        }

            background: linear-gradient(135deg, #667eea, #764ba2);

            color: white;        #fileInput {

            border: none;            display: none;

            padding: 12px 24px;        }

            border-radius: 8px;

            font-size: 1em;        .upload-button {

            cursor: pointer;            background: linear-gradient(135deg, #667eea, #764ba2);

            transition: all 0.3s ease;            color: white;

            margin: 10px;            border: none;

        }            padding: 15px 30px;

            border-radius: 25px;

        .btn:hover {            font-size: 1.1em;

            transform: translateY(-2px);            cursor: pointer;

            box-shadow: 0 8px 15px rgba(102, 126, 234, 0.3);            transition: all 0.3s ease;

        }            margin: 10px;

        }

        .file-info {

            background: #e8f5e8;        .upload-button:hover {

            border: 1px solid #d4edda;            transform: translateY(-2px);

            border-radius: 8px;            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);

            padding: 15px;        }

            margin-top: 20px;

            display: none;        .file-info {

        }            margin-top: 20px;

            padding: 15px;

        .loading-section {            background: #e8f5e8;

            text-align: center;            border-radius: 10px;

            padding: 40px;            display: none;

            display: none;        }

        }

        .results-section {

        .spinner {            margin-top: 30px;

            border: 4px solid #f3f3f3;            display: none;

            border-top: 4px solid #667eea;        }

            border-radius: 50%;

            width: 50px;        .result-card {

            height: 50px;            background: white;

            animation: spin 1s linear infinite;            border-radius: 15px;

            margin: 0 auto 20px;            padding: 25px;

        }            margin-bottom: 20px;

            box-shadow: 0 5px 15px rgba(0,0,0,0.1);

        @keyframes spin {            border-left: 5px solid #667eea;

            0% { transform: rotate(0deg); }        }

            100% { transform: rotate(360deg); }

        }        .result-header {

            display: flex;

        .results-section {            justify-content: between;

            display: none;            align-items: center;

            padding: 20px 0;            margin-bottom: 15px;

        }        }



        .results-grid {        .result-title {

            display: grid;            font-size: 1.3em;

            grid-template-columns: 1fr 1fr;            font-weight: bold;

            gap: 30px;            color: #2c3e50;

            margin-bottom: 30px;        }

        }

        .co2-value {

        .result-card {            font-size: 2em;

            background: white;            font-weight: bold;

            border-radius: 15px;            color: #27ae60;

            padding: 25px;            text-align: center;

            box-shadow: 0 8px 25px rgba(0,0,0,0.1);            margin: 15px 0;

            border: 1px solid #e9ecef;        }

            transition: transform 0.3s ease;

        }        .loading {

            text-align: center;

        .result-card:hover {            padding: 40px;

            transform: translateY(-5px);            display: none;

            box-shadow: 0 15px 35px rgba(0,0,0,0.15);        }

        }

        .spinner {

        .result-card h3 {            border: 4px solid #f3f3f3;

            margin-bottom: 20px;            border-top: 4px solid #667eea;

            font-size: 1.3em;            border-radius: 50%;

            color: #2c3e50;            width: 50px;

            border-bottom: 2px solid #e9ecef;            height: 50px;

            padding-bottom: 10px;            animation: spin 1s linear infinite;

        }            margin: 0 auto 20px;

        }

        .info-row {

            display: flex;        @keyframes spin {

            justify-content: space-between;            0% { transform: rotate(0deg); }

            align-items: center;            100% { transform: rotate(360deg); }

            padding: 8px 0;        }

            border-bottom: 1px solid #f8f9fa;

        }        .error {

            background: #ffe6e6;

        .info-row:last-child {            color: #d63031;

            border-bottom: none;            padding: 15px;

        }            border-radius: 10px;

            margin: 15px 0;

        .label {            display: none;

            font-weight: 600;        }

            color: #495057;

            flex: 1;        .sample-files {

        }            background: #f1f3f4;

            border-radius: 15px;

        .value {            padding: 25px;

            flex: 1;            margin-top: 30px;

            text-align: right;        }

            color: #2c3e50;

            font-weight: 500;        .sample-title {

        }            font-size: 1.2em;

            font-weight: bold;

        .co2-highlight {            margin-bottom: 15px;

            background: linear-gradient(135deg, #2c3e50, #34495e);            color: #2c3e50;

            color: white;        }

            border: 3px solid #3498db;

            margin-bottom: 30px;        .sample-item {

            grid-column: 1 / -1;            background: white;

        }            padding: 15px;

            border-radius: 10px;

        .co2-value {            margin-bottom: 10px;

            font-size: 2.5em;            border-left: 4px solid #667eea;

            margin: 10px 0;            cursor: pointer;

            color: #3498db;            transition: all 0.3s ease;

            text-shadow: 0 0 10px rgba(52, 152, 219, 0.3);        }

            text-align: center;

        }        .sample-item:hover {

            transform: translateX(5px);

        .calculation-formula {            box-shadow: 0 5px 15px rgba(0,0,0,0.1);

            font-size: 0.9em;        }

            color: #bdc3c7;

            text-align: center;        .footer {

            margin-top: 10px;            background: #2c3e50;

        }            color: white;

            text-align: center;

        .error-section {            padding: 20px;

            background: #f8d7da;        }

            border: 1px solid #f5c6cb;

            color: #721c24;        @media (max-width: 768px) {

            padding: 20px;            .main-content {

            border-radius: 8px;                padding: 20px;

            margin: 20px 0;            }

            display: none;            

        }            .header h1 {

                font-size: 2em;

        .json-toggle {            }

            margin-top: 20px;        }

            text-align: center;    </style>

        }</head>

<body>

        .json-results {    <div class="container">

            background: #2c3e50;        <div class="header">

            color: #ecf0f1;            <div class="version-info">

            padding: 20px;                <div><strong>Frontend:</strong> v1.1.1</div>

            border-radius: 8px;                <div><strong>API:</strong> <span id="apiVersion">Loading...</span></div>

            font-family: 'Consolas', 'Monaco', monospace;            </div>

            font-size: 0.9em;            <h1>üå± Matelio GreenComplay EPD-Extractor</h1>

            white-space: pre-wrap;            <p>CO2 Footprint Calculator f√ºr Environmental Product Declarations</p>

            overflow-x: auto;        </div>

            max-height: 400px;

            overflow-y: auto;        <div class="main-content">

            display: none;            <div class="upload-section">

            margin-top: 15px;                <div class="upload-area" onclick="document.getElementById('fileInput').click()">

        }                    <div class="upload-icon">üìÑ</div>

                    <h3>EPD PDF-Datei hochladen</h3>

        .api-status {                    <p>Klicken Sie hier oder ziehen Sie eine EPD PDF-Datei hierher</p>

            position: fixed;                    <button class="upload-button">Datei ausw√§hlen</button>

            bottom: 20px;                    <input type="file" id="fileInput" accept=".pdf" onchange="handleFileSelect(event)">

            right: 20px;                </div>

            background: rgba(44, 62, 80, 0.9);                <div id="fileInfo" class="file-info">

            color: white;                    <strong>Ausgew√§hlte Datei:</strong> <span id="fileName"></span>

            padding: 10px 15px;                </div>

            border-radius: 8px;            </div>

            font-size: 0.8em;

        }            <div class="loading" id="loadingSection">

                <div class="spinner"></div>

        @media (max-width: 768px) {                <h3>EPD wird analysiert...</h3>

            .results-grid {                <p>Dies kann 30-60 Sekunden dauern</p>

                grid-template-columns: 1fr;            </div>

            }

                        <div class="error" id="errorSection">

            .main-content {                <strong>Fehler:</strong> <span id="errorMessage"></span>

                padding: 20px;            </div>

            }

                        <div class="results-section" id="resultsSection">

            .header h1 {                <!-- CO2 Calculation Highlight Card -->

                font-size: 1.8em;                <div class="result-card" style="background: linear-gradient(135deg, #2c3e50, #34495e); color: white; border: 3px solid #3498db; margin-bottom: 30px;">

            }                    <div style="padding: 25px; text-align: center;">

                                    <h3 style="margin: 0 0 15px 0; font-size: 1.2em; color: #ecf0f1;">üå± CO‚ÇÇ EQUIVALENT PER KG MATERIAL</h3>

            .co2-value {                        <div class="co2-value" id="co2Value" style="font-size: 2.5em; margin: 10px 0; color: #3498db; text-shadow: 0 0 10px rgba(52, 152, 219, 0.3);">Wird berechnet...</div>

                font-size: 2em;                        <div id="calculationDetails" style="font-size: 0.9em; opacity: 0.9; margin-top: 15px; color: #bdc3c7;">

            }                            Calculation: <span id="calculationFormula" style="color: #ecf0f1;">wird berechnet...</span><br>

        }                            Calculated using material density (volume-based)

                        </div>

        .technical-specs {                    </div>

            grid-column: 1 / -1;                </div>

        }

    </style>                <!-- Data Grid -->

</head>                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">

<body>                    <!-- Product Name -->

    <div class="container">                    <div class="data-card" style="background: white; border: 1px solid #e9ecef; border-radius: 12px; padding: 20px;">

        <div class="header">                        <h4 style="color: #6c757d; font-size: 0.85em; margin: 0 0 10px 0; text-transform: uppercase;">PRODUCT NAME</h4>

            <h1>üå± Matelio GreenComply</h1>                        <div style="font-size: 1.4em; font-weight: 600; color: #2c3e50; margin-bottom: 8px;" id="materialName">Laden...</div>

            <p>Enhanced EPD Extractor - Comprehensive Environmental Impact Analysis</p>                    </div>

        </div>                    

                    <!-- Functional Unit -->

        <div class="main-content">                    <div class="data-card" style="background: white; border: 1px solid #e9ecef; border-radius: 12px; padding: 20px;">

            <div class="upload-section">                        <h4 style="color: #6c757d; font-size: 0.85em; margin: 0 0 10px 0; text-transform: uppercase;">FUNCTIONAL UNIT</h4>

                <div class="upload-area" onclick="document.getElementById('fileInput').click()">                        <div style="font-size: 1.4em; font-weight: 600; color: #2c3e50; margin-bottom: 8px;" id="functionalUnit">Laden...</div>

                    <div class="upload-icon">üìÑ</div>                    </div>

                    <h3>EPD-Dokument hochladen</h3>                    

                    <p>Klicken Sie hier oder ziehen Sie eine PDF-Datei hierher</p>                    <!-- Material Density -->

                </div>                    <div class="data-card" style="background: white; border: 1px solid #e9ecef; border-radius: 12px; padding: 20px;">

                                        <h4 style="color: #6c757d; font-size: 0.85em; margin: 0 0 10px 0; text-transform: uppercase;">MATERIAL DENSITY</h4>

                <input type="file" id="fileInput" class="file-input" accept=".pdf" />                        <div style="font-size: 1.4em; font-weight: 600; color: #2c3e50; margin-bottom: 8px;" id="materialDensity">Laden...</div>

                                        <div style="font-size: 0.8em; color: #6c757d; font-style: italic;" id="densitySource">Source: wird geladen...</div>

                <div class="file-info" id="fileInfo">                    </div>

                    <p><strong>Ausgew√§hlte Datei:</strong> <span id="fileName"></span></p>                    

                </div>                    <!-- Global Warming Potential -->

                                    <div class="data-card" style="background: white; border: 1px solid #e9ecef; border-radius: 12px; padding: 20px;">

                <button class="btn" onclick="document.getElementById('fileInput').click()">üìÅ Datei ausw√§hlen</button>                        <h4 style="color: #6c757d; font-size: 0.85em; margin: 0 0 10px 0; text-transform: uppercase;">GLOBAL WARMING POTENTIAL</h4>

            </div>                        <div style="font-size: 1.4em; font-weight: 600; color: #2c3e50; margin-bottom: 8px;" id="gwpValue">Laden...</div>

                        <div style="font-size: 0.8em; color: #6c757d; font-style: italic;" id="gwpSource">Source: wird geladen...</div>

            <div class="loading-section" id="loadingSection">                    </div>

                <div class="spinner"></div>                    

                <h3>Analysiere EPD-Dokument...</h3>                    <!-- Material Weight -->

                <p>Dies kann einige Sekunden dauern</p>                    <div class="data-card" style="background: white; border: 1px solid #e9ecef; border-radius: 12px; padding: 20px;">

            </div>                        <h4 style="color: #6c757d; font-size: 0.85em; margin: 0 0 10px 0; text-transform: uppercase;">MATERIAL WEIGHT</h4>

                        <div style="font-size: 1.4em; font-weight: 600; color: #2c3e50; margin-bottom: 8px;" id="materialWeight">Laden...</div>

            <div class="error-section" id="errorSection">                        <div style="font-size: 0.8em; color: #6c757d; font-style: italic;" id="weightSource">Source: wird geladen...</div>

                <h4>‚ö†Ô∏è Fehler bei der Verarbeitung</h4>                    </div>

                <p id="errorMessage"></p>                    

            </div>                    <!-- Additional indicators can be added here -->

                </div>

            <div class="results-section" id="resultsSection">

                <div class="results-grid">                <!-- Full JSON Results -->

                    <!-- CO2 Calculation Highlight -->                <div style="margin-top: 30px;">

                    <div class="result-card co2-highlight">                    <button onclick="toggleJson()" style="background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; margin-bottom: 15px;">ÔøΩ Vollst√§ndige EPD Daten anzeigen</button>

                        <h3 style="text-align: center; margin-bottom: 15px; color: #ecf0f1;">üå± CO‚ÇÇ EQUIVALENT PER KG MATERIAL</h3>                    <pre id="fullResults" style="display: none; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; font-size: 0.85em; max-height: 500px; overflow-y: auto;"></pre>

                        <div class="co2-value" id="co2Value">Wird berechnet...</div>                </div>

                        <div class="calculation-formula" id="calculationFormula">Berechnung l√§uft...</div>            </div>

                    </div>

            <div class="sample-files">

                    <!-- Product Information -->                <div class="sample-title">üìÅ Beispiel EPD-Dateien zum Testen</div>

                    <div class="result-card">                <div class="sample-item" onclick="loadSampleFile('concrete')">

                        <h3>üè≠ Produktinformationen</h3>                    <strong>üèóÔ∏è Concrete EPD</strong> - 2023-10-20-EPD-C8-10.pdf

                        <div class="info-row">                    <br><small>Erwartetes Ergebnis: ~0.047 kg CO2-eq/kg</small>

                            <span class="label">Material:</span>                </div>

                            <span class="value" id="materialName">-</span>                <div class="sample-item" onclick="loadSampleFile('door')">

                        </div>                    <strong>üö™ Door Handle EPD</strong> - V_202409_ECO_EPD_Door-and-window-handles.pdf

                        <div class="info-row">                    <br><small>Erwartetes Ergebnis: ~6.470 kg CO2-eq/kg</small>

                            <span class="label">Hersteller:</span>                </div>

                            <span class="value" id="manufacturer">-</span>            </div>

                        </div>        </div>

                        <div class="info-row">

                            <span class="label">Produkttyp:</span>        <div class="footer">

                            <span class="value" id="productType">-</span>            <p>Powered by Azure Functions API | Entwickelt f√ºr Matelio GreenComplay</p>

                        </div>            <p style="margin-top: 10px; font-size: 0.9em; opacity: 0.8;">

                        <div class="info-row">                API Endpoint: <code>https://epd-extractor-api-2025.azurewebsites.net</code>

                            <span class="label">Funktionale Einheit:</span>            </p>

                            <span class="value" id="functionalUnit">-</span>        </div>

                        </div>    </div>

                        <div class="info-row">

                            <span class="label">Standard/Norm:</span>    <script>

                            <span class="value" id="standard">-</span>        const API_BASE_URL = 'https://epd-extractor-api-2025.azurewebsites.net';

                        </div>        

                        <div class="info-row">        // Sample EPD URLs (you'll need to host these somewhere accessible)

                            <span class="label">EPD-Nummer:</span>        const SAMPLE_FILES = {

                            <span class="value" id="epdNumber">-</span>            concrete: 'https://example.com/sample-pdfs/2023-10-20-EPD-C8-10.pdf',

                        </div>            door: 'https://example.com/sample-pdfs/V_202409_ECO_EPD_Door-and-window-handles.pdf'

                        <div class="info-row">        };

                            <span class="label">G√ºltigkeit:</span>

                            <span class="value" id="validity">-</span>        function handleFileSelect(event) {

                        </div>            const file = event.target.files[0];

                    </div>            if (file && file.type === 'application/pdf') {

                document.getElementById('fileName').textContent = file.name;

                    <!-- Environmental Impact Data -->                document.getElementById('fileInfo').style.display = 'block';

                    <div class="result-card">                

                        <h3>üåç Umweltauswirkungen</h3>                // Auto-process the file

                        <div class="info-row">                processEPD(file);

                            <span class="label">GWP (Global Warming):</span>            } else {

                            <span class="value" id="gwpValue">-</span>                showError('Bitte w√§hlen Sie eine g√ºltige PDF-Datei aus.');

                        </div>            }

                        <div class="info-row">        }

                            <span class="label">Quelle:</span>

                            <span class="value" id="gwpSource">-</span>        function loadSampleFile(sampleType) {

                        </div>            showLoading();

                        <div class="info-row">            

                            <span class="label">Versauerung (AP):</span>            // Simulate loading a sample file

                            <span class="value" id="acidificationValue">-</span>            setTimeout(() => {

                        </div>                const sampleResults = {

                        <div class="info-row">                    concrete: {

                            <span class="label">Eutrophierung (EP):</span>                        carbonFootprintPerKg: {

                            <span class="value" id="eutrophicationValue">-</span>                            value: "0.047",

                        </div>                            unit: "kg CO2-eq/kg",

                        <div class="info-row">                            reason: "Calculated from GWP and material density"

                            <span class="label">Ozonabbau (ODP):</span>                        },

                            <span class="value" id="ozoneDepletionValue">-</span>                        materialName: "Concrete C8/10",

                        </div>                        functionalUnit: "1 kg",

                        <div class="info-row">                        gwp: "47.0 kg CO2-eq",

                            <span class="label">Prim√§renergie:</span>                        materialDensity: "1000 kg/m¬≥"

                            <span class="value" id="primaryEnergyValue">-</span>                    },

                        </div>                    door: {

                    </div>                        carbonFootprintPerKg: {

                            value: "6.470",

                    <!-- Material Properties -->                            unit: "kg CO2-eq/kg", 

                    <div class="result-card">                            reason: "Calculated from GWP and material density"

                        <h3>‚öñÔ∏è Materialeigenschaften</h3>                        },

                        <div class="info-row">                        materialName: "Door Handle (Stainless Steel)",

                            <span class="label">Dichte:</span>                        functionalUnit: "1 kg",

                            <span class="value" id="materialDensity">-</span>                        gwp: "6.470 kg CO2-eq",

                        </div>                        materialDensity: "1.0 kg/kg"

                        <div class="info-row">                    }

                            <span class="label">Quelle:</span>                };

                            <span class="value" id="densitySource">-</span>                

                        </div>                displayResults(sampleResults[sampleType]);

                        <div class="info-row">            }, 2000);

                            <span class="label">Gewicht:</span>        }

                            <span class="value" id="materialWeight">-</span>

                        </div>        async function processEPD(file) {

                        <div class="info-row">            showLoading();

                            <span class="label">Quelle:</span>            hideError();

                            <span class="value" id="weightSource">-</span>            

                        </div>            try {

                        <div class="info-row">                const formData = new FormData();

                            <span class="label">Druckfestigkeit:</span>                formData.append('pdf', file);

                            <span class="value" id="compressiveStrength">-</span>                

                        </div>                const response = await fetch(`${API_BASE_URL}/api/extract-epd`, {

                        <div class="info-row">                    method: 'POST',

                            <span class="label">W√§rmeleitf√§higkeit:</span>                    body: formData,

                            <span class="value" id="thermalConductivity">-</span>                    headers: {

                        </div>                        'Accept': 'application/json'

                        <div class="info-row">                    }

                            <span class="label">Brandverhalten:</span>                });

                            <span class="value" id="fireResistance">-</span>                

                        </div>                if (!response.ok) {

                    </div>                    throw new Error(`API Error: ${response.status} ${response.statusText}`);

                }

                    <!-- System Boundaries & Methodology -->                

                    <div class="result-card technical-specs">                const data = await response.json();

                        <h3>üî¨ Systemgrenzen & Methodik</h3>                displayResults(data);

                        <div class="results-grid">                

                            <div>            } catch (error) {

                                <div class="info-row">                console.error('Processing error:', error);

                                    <span class="label">Lebenszyklusphasen:</span>                showError(`Fehler bei der EPD-Verarbeitung: ${error.message}`);

                                    <span class="value" id="lifecyclePhases">-</span>                hideLoading();

                                </div>            }

                                <div class="info-row">        }

                                    <span class="label">Cut-off Regeln:</span>

                                    <span class="value" id="cutOffRules">-</span>        function displayResults(data) {

                                </div>            hideLoading();

                                <div class="info-row">            

                                    <span class="label">Bewertungsmethode:</span>            console.log('API Response:', data); // Debug output

                                    <span class="value" id="assessmentMethod">-</span>            

                                </div>            // Handle new API structure

                            </div>            const extractedData = data.data || data;

                            <div>            

                                <div class="info-row">            // Update CO2 value and calculation details

                                    <span class="label">Datenqualit√§t:</span>            const co2 = data.carbonFootprintPerKg;

                                    <span class="value" id="dataQuality">-</span>            if (co2 && co2.value !== "Not calculable") {

                                </div>                document.getElementById('co2Value').innerHTML = 

                                <div class="info-row">                    `${co2.value} <small style="font-size: 0.6em;">kg CO2-eq/kg</small>`;

                                    <span class="label">Zeitraum:</span>                

                                    <span class="value" id="referencePeriod">-</span>                // Show calculation formula if available

                                </div>                const gwp = extractedData.gwp?.value || 'X';

                                <div class="info-row">                const density = extractedData.material_density?.value || 'Y';

                                    <span class="label">Geografischer Bezug:</span>                document.getElementById('calculationFormula').textContent = 

                                    <span class="value" id="geographicalScope">-</span>                    `${gwp} kg CO2-eq/m¬≥ √∑ ${density} kg/m¬≥ = ${co2.value} kg CO2-eq/kg`;

                                </div>            } else {

                            </div>                document.getElementById('co2Value').innerHTML = 'Nicht berechenbar';

                        </div>                document.getElementById('calculationFormula').textContent = co2?.reason || 'Keine Daten verf√ºgbar';

                    </div>            }

                </div>            

            // Update main data cards

                <div class="json-toggle">            document.getElementById('materialName').textContent = 

                    <button class="btn" onclick="toggleJson()">üìä Vollst√§ndige API-Antwort anzeigen</button>                extractedData.product_name || data.materialName || 'Nicht gefunden';

                    <div class="json-results" id="fullResults"></div>            

                </div>            document.getElementById('functionalUnit').textContent = 

            </div>                extractedData.functional_unit || data.functionalUnit || 'Nicht gefunden';

        </div>            

    </div>            // GWP with source

            const gwpValue = extractedData.gwp?.value || data.gwp || 'Nicht gefunden';

    <div class="api-status">            const gwpUnit = extractedData.gwp?.unit || 'kg CO2-eq';

        üîó API: <span id="apiVersion">Checking...</span>            document.getElementById('gwpValue').textContent = 

    </div>                gwpValue !== 'Nicht gefunden' ? `${gwpValue} ${gwpUnit}` : gwpValue;

            document.getElementById('gwpSource').textContent = 

    <script>                extractedData.gwp?.source || 'Source: nicht verf√ºgbar';

        const API_BASE_URL = 'https://epd-extractor-api-2025.azurewebsites.net';            

            // Material density with source

        async function processEPD(file) {            const densityValue = extractedData.material_density?.value || data.materialDensity || 'Nicht gefunden';

            showLoading();            const densityUnit = extractedData.material_density?.unit || 'kg/m¬≥';

            hideError();            document.getElementById('materialDensity').textContent = 

                densityValue !== 'Nicht gefunden' ? `${densityValue} ${densityUnit}` : densityValue;

            const formData = new FormData();            document.getElementById('densitySource').textContent = 

            formData.append('pdf', file);                extractedData.material_density?.source || 'Source: nicht verf√ºgbar';

            

            try {            // Material weight with source

                const response = await fetch(`${API_BASE_URL}/api/extract-epd`, {            const weightValue = extractedData.material_weight?.value || 'Nicht gefunden';

                    method: 'POST',            const weightUnit = extractedData.material_weight?.unit || 'kg/m¬≥';

                    body: formData            document.getElementById('materialWeight').textContent = 

                });                weightValue !== 'Nicht gefunden' ? `${weightValue} ${weightUnit}` : weightValue;

            document.getElementById('weightSource').textContent = 

                if (!response.ok) {                extractedData.material_weight?.source || 'Source: nicht verf√ºgbar';

                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);            

                }            // Show full results

            document.getElementById('fullResults').textContent = JSON.stringify(data, null, 2);

                const data = await response.json();            

                console.log('Enhanced API Response:', data);            // Show results section

                displayEnhancedResults(data);            document.getElementById('resultsSection').style.display = 'block';

            } catch (error) {        }

                console.error('Processing error:', error);

                showError(`Fehler bei der Verarbeitung: ${error.message}`);        function toggleJson() {

            } finally {            const jsonResults = document.getElementById('fullResults');

                hideLoading();            const button = event.target;

            }            

        }            if (jsonResults.style.display === 'none') {

                jsonResults.style.display = 'block';

        function displayEnhancedResults(data) {                button.textContent = 'üîº Vollst√§ndige EPD Daten verbergen';

            console.log('Displaying enhanced EPD results:', data);            } else {

                jsonResults.style.display = 'none';

            const extractedData = data.data || data;                button.textContent = 'üîç Vollst√§ndige EPD Daten anzeigen';

            }

            // Display CO2 calculation with enhanced formatting        }

            const co2 = data.carbonFootprintPerKg;

            if (co2 && co2.value !== undefined && co2.value !== null && co2.value !== "Not calculable") {        function showLoading() {

                document.getElementById('co2Value').innerHTML =             document.getElementById('loadingSection').style.display = 'block';

                    `<strong style="color: #e74c3c;">${parseFloat(co2.value).toFixed(4)}</strong> <span style="font-size: 0.6em;">kg CO‚ÇÇe/kg</span>`;            document.getElementById('resultsSection').style.display = 'none';

                document.getElementById('calculationFormula').textContent =         }

                    `GWP: ${co2.gwp || 'N/A'} kg CO‚ÇÇe/m¬≥ √∑ Density: ${co2.density || 'N/A'} kg/m¬≥ = ${parseFloat(co2.value).toFixed(4)} kg CO‚ÇÇe/kg`;

            } else {        function hideLoading() {

                document.getElementById('co2Value').innerHTML = 'Nicht berechenbar';            document.getElementById('loadingSection').style.display = 'none';

                document.getElementById('calculationFormula').textContent = co2?.reason || 'Keine Daten verf√ºgbar';        }

            }

        function showError(message) {

            // Enhanced Product Information            document.getElementById('errorMessage').textContent = message;

            document.getElementById('materialName').textContent =             document.getElementById('errorSection').style.display = 'block';

                extractedData.product_name || extractedData.productName || extractedData.material_name || data.materialName || 'Nicht gefunden';        }

            

            document.getElementById('manufacturer').textContent =         function hideError() {

                extractedData.manufacturer || extractedData.company || extractedData.producer || extractedData.manufacturer_name || 'Nicht gefunden';            document.getElementById('errorSection').style.display = 'none';

                    }

            document.getElementById('productType').textContent = 

                extractedData.product_type || extractedData.productType || extractedData.category || extractedData.product_category || 'Nicht gefunden';        // Drag and drop functionality

                    const uploadSection = document.querySelector('.upload-section');

            document.getElementById('functionalUnit').textContent =         

                extractedData.functional_unit || extractedData.functionalUnit || extractedData.reference_unit || data.functionalUnit || 'Nicht gefunden';        uploadSection.addEventListener('dragover', (e) => {

                        e.preventDefault();

            document.getElementById('standard').textContent =             uploadSection.style.borderColor = '#667eea';

                extractedData.standard || extractedData.norm || extractedData.certification || extractedData.compliance_standard || 'Nicht gefunden';            uploadSection.style.backgroundColor = '#f0f4ff';

                    });

            document.getElementById('epdNumber').textContent =         

                extractedData.epd_number || extractedData.epdNumber || extractedData.declaration_number || extractedData.epd_id || 'Nicht gefunden';        uploadSection.addEventListener('dragleave', (e) => {

                        e.preventDefault();

            document.getElementById('validity').textContent =             uploadSection.style.borderColor = '#dee2e6';

                extractedData.validity_period || extractedData.validity || extractedData.valid_until || extractedData.expiry_date || 'Nicht gefunden';            uploadSection.style.backgroundColor = '#f8f9fa';

        });

            // Enhanced Environmental Impact Data        

            const gwpValue = extractedData.gwp?.value || extractedData.gwp || extractedData.global_warming_potential || data.gwp || 'Nicht gefunden';        uploadSection.addEventListener('drop', (e) => {

            document.getElementById('gwpValue').textContent =             e.preventDefault();

                typeof gwpValue === 'number' ? `${gwpValue.toFixed(4)} kg CO‚ÇÇe` : gwpValue;            uploadSection.style.borderColor = '#dee2e6';

            document.getElementById('gwpSource').textContent =             uploadSection.style.backgroundColor = '#f8f9fa';

                extractedData.gwp?.source || extractedData.gwpSource || extractedData.gwp_source || 'A1-A3';            

            const files = e.dataTransfer.files;

            // Additional impact categories            if (files.length > 0) {

            if (extractedData.impact_categories || extractedData.impactCategories || extractedData.environmental_impacts) {                const file = files[0];

                const impacts = extractedData.impact_categories || extractedData.impactCategories || extractedData.environmental_impacts;                if (file.type === 'application/pdf') {

                                    document.getElementById('fileName').textContent = file.name;

                document.getElementById('acidificationValue').textContent =                     document.getElementById('fileInfo').style.display = 'block';

                    impacts.acidification || impacts.ap || impacts.acidification_potential || 'Nicht verf√ºgbar';                    processEPD(file);

                document.getElementById('eutrophicationValue').textContent =                 } else {

                    impacts.eutrophication || impacts.ep || impacts.eutrophication_potential || 'Nicht verf√ºgbar';                    showError('Bitte laden Sie nur PDF-Dateien hoch.');

                document.getElementById('ozoneDepletionValue').textContent =                 }

                    impacts.ozone_depletion || impacts.odp || impacts.ozone_depletion_potential || 'Nicht verf√ºgbar';            }

                document.getElementById('primaryEnergyValue').textContent =         });

                    impacts.primary_energy || impacts.pe || impacts.primary_energy_demand || 'Nicht verf√ºgbar';

            } else {        // Test API health on page load and get version

                document.getElementById('acidificationValue').textContent = 'Nicht verf√ºgbar';        window.addEventListener('load', async () => {

                document.getElementById('eutrophicationValue').textContent = 'Nicht verf√ºgbar';            try {

                document.getElementById('ozoneDepletionValue').textContent = 'Nicht verf√ºgbar';                const response = await fetch(`${API_BASE_URL}/api/health`);

                document.getElementById('primaryEnergyValue').textContent = 'Nicht verf√ºgbar';                if (response.ok) {

            }                    const healthData = await response.json();

                    console.log('‚úÖ API is healthy and ready');

            // Enhanced Material Properties                    

            const densityValue = extractedData.material_density?.value || extractedData.materialDensity || extractedData.density || data.materialDensity || 'Nicht gefunden';                    // Update API version display

            document.getElementById('materialDensity').textContent =                     const apiVersion = healthData.version || 'Unknown';

                typeof densityValue === 'number' ? `${densityValue} kg/m¬≥` : densityValue;                    document.getElementById('apiVersion').textContent = `v${apiVersion}`;

            document.getElementById('densitySource').textContent =                     

                extractedData.material_density?.source || extractedData.densitySource || extractedData.density_source || 'EPD Datenblatt';                    console.log(`Frontend: v1.1.1 | API: v${apiVersion}`);

                } else {

            const weightValue = extractedData.material_weight?.value || extractedData.materialWeight || extractedData.weight || data.materialWeight || 'Nicht gefunden';                    console.warn('‚ö†Ô∏è API might have issues');

            document.getElementById('materialWeight').textContent =                     document.getElementById('apiVersion').textContent = 'Error';

                typeof weightValue === 'number' ? `${weightValue} kg/m¬≥` : weightValue;                }

            document.getElementById('weightSource').textContent =             } catch (error) {

                extractedData.material_weight?.source || extractedData.weightSource || extractedData.weight_source || 'Berechnet';                console.error('‚ùå API is not reachable:', error);

                document.getElementById('apiVersion').textContent = 'Offline';

            // Technical properties            }

            if (extractedData.technical_data || extractedData.technicalData || extractedData.material_properties) {        });

                const technical = extractedData.technical_data || extractedData.technicalData || extractedData.material_properties;    </script>

                </body>

                document.getElementById('compressiveStrength').textContent = </html>
                    technical.compressive_strength || technical.strength || technical.compression_strength || 'Nicht verf√ºgbar';
                document.getElementById('thermalConductivity').textContent = 
                    technical.thermal_conductivity || technical.lambda || technical.heat_conductivity || 'Nicht verf√ºgbar';
                document.getElementById('fireResistance').textContent = 
                    technical.fire_resistance || technical.fireClass || technical.fire_rating || 'Nicht verf√ºgbar';
            } else {
                document.getElementById('compressiveStrength').textContent = 'Nicht verf√ºgbar';
                document.getElementById('thermalConductivity').textContent = 'Nicht verf√ºgbar';
                document.getElementById('fireResistance').textContent = 'Nicht verf√ºgbar';
            }

            // System boundaries and methodology
            if (extractedData.system_boundaries || extractedData.systemBoundaries || extractedData.methodology) {
                const boundaries = extractedData.system_boundaries || extractedData.systemBoundaries || extractedData.methodology;
                
                document.getElementById('lifecyclePhases').textContent = 
                    boundaries.lifecycle_phases || boundaries.phases || boundaries.life_cycle_stages || 'A1-A3 (Cradle to Gate)';
                document.getElementById('cutOffRules').textContent = 
                    boundaries.cut_off_rules || boundaries.cutOff || boundaries.cutoff_criteria || '< 1%';
                document.getElementById('assessmentMethod').textContent = 
                    boundaries.assessment_method || boundaries.method || boundaries.lca_method || 'EN 15804+A2';
                document.getElementById('dataQuality').textContent = 
                    boundaries.data_quality || boundaries.quality || boundaries.data_representativeness || 'Representative';
                document.getElementById('referencePeriod').textContent = 
                    boundaries.reference_period || boundaries.period || boundaries.time_representativeness || 'Nicht angegeben';
                document.getElementById('geographicalScope').textContent = 
                    boundaries.geographical_scope || boundaries.geography || boundaries.geographic_representativeness || 'Nicht angegeben';
            } else {
                document.getElementById('lifecyclePhases').textContent = 'A1-A3 (Cradle to Gate)';
                document.getElementById('cutOffRules').textContent = '< 1%';
                document.getElementById('assessmentMethod').textContent = 'EN 15804+A2';
                document.getElementById('dataQuality').textContent = 'Nicht angegeben';
                document.getElementById('referencePeriod').textContent = 'Nicht angegeben';
                document.getElementById('geographicalScope').textContent = 'Nicht angegeben';
            }

            // Show full JSON results
            document.getElementById('fullResults').textContent = JSON.stringify(data, null, 2);

            // Show results section
            document.getElementById('resultsSection').style.display = 'block';
        }

        function toggleJson() {
            const jsonResults = document.getElementById('fullResults');
            const button = event.target;
            
            if (jsonResults.style.display === 'none') {
                jsonResults.style.display = 'block';
                button.textContent = 'üìä Vollst√§ndige Daten verbergen';
            } else {
                jsonResults.style.display = 'none';
                button.textContent = 'üìä Vollst√§ndige API-Antwort anzeigen';
            }
        }

        function showLoading() {
            document.getElementById('loadingSection').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'none';
        }

        function hideLoading() {
            document.getElementById('loadingSection').style.display = 'none';
        }

        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('errorSection').style.display = 'block';
        }

        function hideError() {
            document.getElementById('errorSection').style.display = 'none';
        }

        // Drag and drop functionality
        const uploadSection = document.querySelector('.upload-section');
        
        uploadSection.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadSection.style.borderColor = '#667eea';
            uploadSection.style.backgroundColor = '#f0f4ff';
        });

        uploadSection.addEventListener('dragleave', (e) => {
            e.preventDefault();
            uploadSection.style.borderColor = '#dee2e6';
            uploadSection.style.backgroundColor = '#f8f9fa';
        });

        uploadSection.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadSection.style.borderColor = '#dee2e6';
            uploadSection.style.backgroundColor = '#f8f9fa';
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                const file = files[0];
                if (file.type === 'application/pdf') {
                    document.getElementById('fileName').textContent = file.name;
                    document.getElementById('fileInfo').style.display = 'block';
                    processEPD(file);
                } else {
                    showError('Bitte laden Sie nur PDF-Dateien hoch.');
                }
            }
        });

        // File input change handler
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('fileName').textContent = file.name;
                document.getElementById('fileInfo').style.display = 'block';
                processEPD(file);
            }
        });

        // Test API connection and get version
        window.addEventListener('load', async () => {
            try {
                const response = await fetch(`${API_BASE_URL}/api/health`);
                if (response.ok) {
                    const health = await response.json();
                    console.log('API is healthy and ready');
                    
                    // Enhanced version display
                    const apiVersion = health.version || 'Unknown';
                    document.getElementById('apiVersion').textContent = `v${apiVersion}`;
                    
                    console.log(`Connected to API version: ${apiVersion}`);
                } else {
                    console.log('API might have issues');
                    document.getElementById('apiVersion').textContent = 'Error';
                }
            } catch (error) {
                console.log('API not available:', error);
                document.getElementById('apiVersion').textContent = 'Offline';
            }
        });
    </script>
</body>
</html>